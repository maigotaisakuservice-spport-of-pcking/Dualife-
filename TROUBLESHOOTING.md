# トラブルシューティングガイド for Dualife
# ==========================================

このガイドは、『Dualife』の開発や運用中に発生する可能性のある一般的な問題とその解決策をまとめたものです。

## 1. Cloudinaryへの画像アップロードが失敗する (HTTP 420 エラー)

コンソールに `POST https://api.cloudinary.com/v1_1/... 420 (Method Failure)` というエラーが表示される場合、Cloudinary側の設定に問題がある可能性が高いです。

**原因**:
このエラーは、多くの場合、「**署名なしアップロード (Unsigned Upload)**」が無効になっているか、設定が不完全なために発生します。アプリは `dualife-post-image-upload` という名前のアップロードプリセットを使って画像をアップロードしようとしますが、このプリセットの設定がCloudinary側で正しく行われていない可能性があります。

**解決策**:
以下の手順でCloudinaryのアップロードプリセット設定を確認してください。

1.  **Cloudinaryにログイン**:
    *   [Cloudinaryのウェブサイト](https://cloudinary.com/users/login)にアクセスし、ご自身のアカウントでログインします。

2.  **設定画面へ移動**:
    *   ダッシュボード右上の歯車アイコンをクリックし、「**Settings**」画面を開きます。

3.  **アップロードプリセットの確認**:
    *   「**Upload**」タブをクリックし、画面を下にスクロールして「**Upload presets**」の項目を探します。
    *   `dualife-post-image-upload` という名前のプリセットが存在するか確認してください。

4.  **プリセットの編集と確認**:
    *   もしプリセットが存在すれば、その行の右側にある「**Edit**」をクリックします。存在しない場合は、「**Add upload preset**」から新規作成してください。
    *   以下の2つの項目が正しく設定されていることを確認してください。
        *   **Preset name**: `dualife-post-image-upload` （アプリのコードと完全に一致している必要があります）
        *   **Signing Mode**: 「**Unsigned**」に設定されている必要があります。これが「Signed」になっていると、420エラーの直接的な原因となります。
    *   設定を変更した場合は、画面下部の「**Save**」ボタンを忘れずにクリックしてください。

上記の設定を見直すことで、画像アップロードの問題が解決するはずです。

---

## 2. 「マイルーム」の画像が表示されない (Firestoreインデックスエラー)

**原因**:
この問題は、Firestoreに必要な複合インデックスが作成されていないために発生します。

**解決策**:
プロジェクトルートにある `firestore-indexes.txt` ファイルを開き、記載されている手順に従って複合インデックスを作成してください。
